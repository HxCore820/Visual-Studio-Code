name: ğŸš€ VS Code Web IDX (Zun x Kami Tunnel)

on:
  workflow_dispatch:
    inputs:
      duration:
        description: 'ğŸ• Thá»i gian sá»­ dá»¥ng'
        required: false
        default: '5h40m'
        type: choice
        options:
        - '1h'
        - '3h' 
        - '5h40m'

jobs:
  VSCode-Web:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ› ï¸ ÄANG KHá»I Táº O VS CODE WEB IDX
        run: |
          # 1. Tá»‘i Æ°u há»‡ thá»‘ng áº©n danh
          sudo apt-get update > /dev/null 2>&1
          
          # 2. CÃ i Ä‘áº·t Code-Server (VS Code trÃªn trÃ¬nh duyá»‡t)
          curl -fsSL https://code-server.dev/install.sh | sh > /dev/null 2>&1
          
          # 3. Táº¡o á»• cá»©ng 60GB tÃ¡ch biá»‡t cho Project
          sudo fallocate -l 60G /swapfile_disk > /dev/null 2>&1
          
          # 4. Cáº¥u hÃ¬nh User & Password truy cáº­p Web
          # Pass: Ubuntu@123456
          mkdir -p ~/.config/code-server
          echo "bind-addr: 127.0.0.1:8080" > ~/.config/code-server/config.yaml
          echo "auth: password" >> ~/.config/code-server/config.yaml
          echo "password: Ubuntu@123456" >> ~/.config/code-server/config.yaml
          echo "cert: false" >> ~/.config/code-server/config.yaml
          
          # 5. Cháº¡y Code-Server ngáº§m
          nohup code-server > /dev/null 2>&1 &
          
          # 6. Táº£i vÃ  cháº¡y Kami Tunnel cho Web (Port 8080)
          wget -q https://github.com/kami2k1/tunnel/releases/latest/download/kami-tunnel-linux-amd64.tar.gz
          tar -xzf kami-tunnel-linux-amd64.tar.gz
          chmod +x kami-tunnel
          ./kami-tunnel 8080 > /dev/null 2>&1 &

      - name: ğŸ‰ THÃ”NG TIN TRUY Cáº¬P VS CODE
        run: |
          echo "ğŸ”„ Äang láº¥y liÃªn káº¿t IDX tá»« Zun x Kami Tunnel..."
          while [ ! -f kami_tunnel.txt ]; do sleep 2; done
          WEB_URL=$(cat kami_tunnel.txt)
          
          echo ""
          echo "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
          echo "â”‚        ğŸš€ VS CODE WEB IDX READY (By Zun)           â”‚"
          echo "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
          echo "â”‚ ğŸŒ LiÃªn káº¿t Web: http://$WEB_URL"
          echo "â”‚ ğŸ” Máº­t kháº©u    : Ubuntu@123456"
          echo "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
          echo "â”‚ âš¡ Cáº¥u hÃ¬nh    : 4 Cores | 16 GB RAM | 60 GB SSD   â”‚"
          echo "â”‚ ğŸ› ï¸  TÃ­nh nÄƒng   : Full Terminal, Git, Node.js      â”‚"
          echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
          echo ""
          echo "WEB_LINK=$WEB_URL" >> $GITHUB_ENV

      - name: â³ DUY TRÃŒ PHIÃŠN VS CODE
        run: |
          for i in {1..72}; do
            echo "ğŸ’ [$(date +%H:%M:%S)] IDX Ä‘ang cháº¡y. Link: $WEB_LINK"
            sleep 300
          done
